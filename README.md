# 股票操作反思 Web App

一个基于 Streamlit 的股票操作反思系统，帮助您记录交易、反思操作，并通过可视化图表追踪自己的评分变化。

## 功能特点

- 📝 **交易记录**: 记录每次股票交易的详细信息
- 🎯 **评分系统**: 基于4个维度的操作评分（涨了舍得卖、跌了敢买、涨了敢买、跌了舍得卖）
- 📊 **数据可视化**: 评分趋势图、分布图、雷达图等多种图表
- 🔗 **tushare 集成**: 自动获取股票信息和历史数据
- 💾 **数据持久化**: 使用 SQLite 数据库存储所有记录

## 评分维度

| 动作类型 | 场景 | 要求 | 分值 | 自检问题 |
|---------|------|------|------|---------|
| 涨了舍得卖 | 浮盈 | 克服贪婪 | 30 | 今天如果收盘盈利≥X%，我是否愿意按计划减仓？ |
| 跌了敢买 | 浮亏 | 克服恐惧 | 30 | 如果价格再跌Y%，我是否还有现金、有勇气加仓？ |
| 涨了敢买 | 突破/趋势延续 | 克服"恐高" | 20 | 突破前高时，我是否敢用小仓位追趋势？ |
| 跌了舍得卖 | 破位/逻辑破坏 | 克服"惜亏" | 20 | 跌到止损位时，我能否立刻砍仓，不找理由？ |

## 安装步骤

### 1. 克隆或下载项目

```bash
cd Zenfolio
```

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

### 3. 获取 tushare token

1. 访问 [tushare.pro](https://tushare.pro/)
2. 注册账号并登录
3. 在个人中心获取 API token

### 4. 运行应用

```bash
streamlit run app.py
```

应用将在浏览器中自动打开，默认地址为 `http://localhost:8501`

## 使用说明

### 首次使用

1. 在侧边栏输入您的 tushare token
2. 点击"查询股票信息"按钮测试连接

### 记录交易

1. 进入"记录交易"标签页
2. 填写交易信息：
   - 选择交易日期
   - 输入股票代码（如：000001 或 600000）
   - 点击"查询股票信息"获取股票名称
   - 选择动作类型
   - 填写交易价格和数量
3. 完成评分：
   - 回答自检问题
   - 设置评分（0-100分）
   - 记录反思笔记
4. 点击"保存交易记录和评分"

### 查看评分

1. 进入"查看评分"标签页
2. 选择日期范围
3. 查看各种可视化图表：
   - 评分趋势图：显示各维度评分随时间的变化
   - 评分分布图：显示各维度的统计信息
   - 评分雷达图：综合展示各维度表现
4. 查看评分汇总表和最近记录

### 交易历史

1. 进入"交易历史"标签页
2. 使用筛选功能：
   - 搜索股票代码或名称
   - 按动作类型筛选
   - 选择排序方式
3. 查看交易时间线图表

### 数据管理

- **导出数据**: 在侧边栏点击"导出数据"按钮，将交易记录和评分记录导出为 Excel 文件

## 项目结构

```
stock_reflection_app/
├── app.py                 # Streamlit 主应用
├── database.py            # SQLite 数据库操作
├── models.py              # 数据模型定义
├── tushare_client.py      # tushare API 封装
├── visualization.py       # 数据可视化函数
├── requirements.txt       # 依赖包
├── README.md             # 使用说明
└── stock_reflection.db   # SQLite 数据库（自动生成）
```

## 技术栈

- **Streamlit**: Web 应用框架
- **tushare**: 股票数据接口
- **SQLite**: 轻量级数据库
- **Plotly**: 交互式数据可视化
- **pandas**: 数据处理
- **Python 3.7+

## 注意事项

1. **tushare token**: 需要有效的 tushare token 才能使用股票查询功能
2. **数据存储**: 所有数据存储在本地 SQLite 数据库中，请定期备份
3. **网络连接**: 查询股票信息需要网络连接
4. **权限要求**: 某些 tushare 功能可能需要相应的权限等级

## 常见问题

### Q: 如何获取 tushare token？
A: 访问 tushare.pro 注册账号，在个人中心可以找到 API token。

### Q: 数据存储在哪里？
A: 数据存储在项目目录下的 `stock_reflection.db` SQLite 数据库文件中。

### Q: 可以导出数据吗？
A: 可以，在侧边栏点击"导出数据"按钮，数据将导出为 Excel 文件。

### Q: 支持哪些股票市场？
A: 支持 A 股市场（上交所和深交所），股票代码格式为 6 位数字。

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！

